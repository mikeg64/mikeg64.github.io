<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hermes-docs: src/restart.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hermes-docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('restart_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">restart.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for writing and reading restart files.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="copyright_8h_source.html">copyright.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="defs_8h_source.html">defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="athena_8h_source.html">athena.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prototypes_8h_source.html">prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="particle_8h_source.html">particles/particle.h</a>&quot;</code><br />
</div>
<p><a href="restart_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="restart_8c.html#ad964b97cdef7ace0e38dea077f7dbc0b">restart_grids</a> (char *res_file, <a class="el" href="struct_mesh_s.html">MeshS</a> *pM)</td></tr>
<tr class="memdesc:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads nstep, time, dt, and arrays of <a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed.">ConsS</a> and interface B for each of the Grid structures in the restart file. <br  />
  <a href="restart_8c.html#ad964b97cdef7ace0e38dea077f7dbc0b">More...</a><br /></td></tr>
<tr class="separator:ad964b97cdef7ace0e38dea077f7dbc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8423a9f51dd688b5867e611120ba0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="restart_8c.html#a0c8423a9f51dd688b5867e611120ba0e">dump_restart</a> (<a class="el" href="struct_mesh_s.html">MeshS</a> *pM, <a class="el" href="struct_output_s.html">OutputS</a> *pout)</td></tr>
<tr class="memdesc:a0c8423a9f51dd688b5867e611120ba0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a restart file, including problem-specific data from a user defined function <br  />
  <a href="restart_8c.html#a0c8423a9f51dd688b5867e611120ba0e">More...</a><br /></td></tr>
<tr class="separator:a0c8423a9f51dd688b5867e611120ba0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for writing and reading restart files. </p>
<p>PURPOSE: Functions for writing and reading restart files. Restart files begin with the input parameter file (athinput.XX) used to start the run in text format, followed by binary format data for selected quantities (time, dt, etc) for each of the Grid structures being updated by this processor. Lastly, any problem-specific data in binary format is included, which must be written by a user function in the problem generator. Since all of the mesh data (NLevels, number of Domains, size of Grids, etc.) can be recalculated from the athinput file, only the dependent variables (time, dt, nstep, U, B, etc.) are dumped in restart files.</p>
<p>The athinput file included at the start of the restart file is parsed by <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program">main()</a> in Step 2, using the standard par_* functions, with the parameters used by <a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27" title="General initialization of the nested mesh hierarchy.">init_mesh()</a> and <a class="el" href="init__grid_8c.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure.">init_grid()</a> to re-initialize the grid. Parameter values read from the athinput file contained in the resfile can be superceded by input from the command line, or another input file.</p>
<p>MPI parallel jobs must be restarted on the same number of processors as they were run originally.</p>
<p>With SMR, restart files contain ALL levels and domains being updated by each processor in one file, written in the default directory for the process.</p>
<p>CONTAINS PUBLIC FUNCTIONS:</p><ul>
<li><a class="el" href="restart_8c.html#ad964b97cdef7ace0e38dea077f7dbc0b" title="Reads nstep, time, dt, and arrays of ConsS and interface B for each of the Grid structures in the res...">restart_grids()</a> - reads nstep,time,dt,<a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed.">ConsS</a> and B from restart file</li>
<li><a class="el" href="restart_8c.html#a0c8423a9f51dd688b5867e611120ba0e" title="Writes a restart file, including problem-specific data from a user defined function">dump_restart()</a> - writes a restart file </li>
</ul>

<p class="definition">Definition in file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0c8423a9f51dd688b5867e611120ba0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c8423a9f51dd688b5867e611120ba0e">&#9670;&nbsp;</a></span>dump_restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_restart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_output_s.html">OutputS</a> *&#160;</td>
          <td class="paramname"><em>pout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a restart file, including problem-specific data from a user defined function <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="restart_8c_source.html#l00439">439</a> of file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>

</div>
</div>
<a id="ad964b97cdef7ace0e38dea077f7dbc0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad964b97cdef7ace0e38dea077f7dbc0b">&#9670;&nbsp;</a></span>restart_grids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restart_grids </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>res_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads nstep, time, dt, and arrays of <a class="el" href="struct_cons_s.html" title="Conserved variables. IMPORTANT!! The order of the elements in ConsS CANNOT be changed.">ConsS</a> and interface B for each of the Grid structures in the restart file. <br  />
 </p>
<p>By the time this function is called (in Step 6 of <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program">main()</a>), the Mesh hierarchy has already been re-initialized by <a class="el" href="init__mesh_8c.html#a916f9c7c3347abd0ff4e1acc00cd0f27" title="General initialization of the nested mesh hierarchy.">init_mesh()</a> and <a class="el" href="init__grid_8c.html#a95667109c997592ac508a6f67e34b827" title="Initializes most variables in the Grid structure.">init_grid()</a> in Step 4 of <a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Athena main program">main()</a> using parameters in the athinput file at the start of this restart file, the command line, or from a new input file. </p>

<p class="definition">Definition at line <a class="el" href="restart_8c_source.html#l00056">56</a> of file <a class="el" href="restart_8c_source.html">restart.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="restart_8c.html">restart.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
