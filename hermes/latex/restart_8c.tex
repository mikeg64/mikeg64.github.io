\hypertarget{restart_8c}{}\doxysection{src/restart.c File Reference}
\label{restart_8c}\index{src/restart.c@{src/restart.c}}


Functions for writing and reading restart files.  


{\ttfamily \#include \char`\"{}copyright.\+h\char`\"{}}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}defs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}athena.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}globals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}prototypes.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}particles/particle.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b}{restart\+\_\+grids}} (char $\ast$res\+\_\+file, \mbox{\hyperlink{struct_mesh_s}{MeshS}} $\ast$pM)
\begin{DoxyCompactList}\small\item\em Reads nstep, time, dt, and arrays of \mbox{\hyperlink{struct_cons_s}{ConsS}} and interface B for each of the Grid structures in the restart file. ~\newline
 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{restart_8c_a0c8423a9f51dd688b5867e611120ba0e}{dump\+\_\+restart}} (\mbox{\hyperlink{struct_mesh_s}{MeshS}} $\ast$pM, \mbox{\hyperlink{struct_output_s}{OutputS}} $\ast$pout)
\begin{DoxyCompactList}\small\item\em Writes a restart file, including problem-\/specific data from a user defined function ~\newline
 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Functions for writing and reading restart files. 

P\+U\+R\+P\+O\+SE\+: Functions for writing and reading restart files. Restart files begin with the input parameter file (athinput.\+XX) used to start the run in text format, followed by binary format data for selected quantities (time, dt, etc) for each of the Grid structures being updated by this processor. Lastly, any problem-\/specific data in binary format is included, which must be written by a user function in the problem generator. Since all of the mesh data (N\+Levels, number of Domains, size of Grids, etc.) can be recalculated from the athinput file, only the dependent variables (time, dt, nstep, U, B, etc.) are dumped in restart files.

The athinput file included at the start of the restart file is parsed by \mbox{\hyperlink{main_8c_a0ddf1224851353fc92bfbff6f499fa97}{main()}} in Step 2, using the standard par\+\_\+$\ast$ functions, with the parameters used by \mbox{\hyperlink{init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27}{init\+\_\+mesh()}} and \mbox{\hyperlink{init__grid_8c_a95667109c997592ac508a6f67e34b827}{init\+\_\+grid()}} to re-\/initialize the grid. Parameter values read from the athinput file contained in the resfile can be superceded by input from the command line, or another input file.

M\+PI parallel jobs must be restarted on the same number of processors as they were run originally.

With S\+MR, restart files contain A\+LL levels and domains being updated by each processor in one file, written in the default directory for the process.

C\+O\+N\+T\+A\+I\+NS P\+U\+B\+L\+IC F\+U\+N\+C\+T\+I\+O\+NS\+:
\begin{DoxyItemize}
\item \mbox{\hyperlink{restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b}{restart\+\_\+grids()}} -\/ reads nstep,time,dt,\mbox{\hyperlink{struct_cons_s}{ConsS}} and B from restart file
\item \mbox{\hyperlink{restart_8c_a0c8423a9f51dd688b5867e611120ba0e}{dump\+\_\+restart()}} -\/ writes a restart file 
\end{DoxyItemize}

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{restart_8c_a0c8423a9f51dd688b5867e611120ba0e}\label{restart_8c_a0c8423a9f51dd688b5867e611120ba0e}} 
\index{restart.c@{restart.c}!dump\_restart@{dump\_restart}}
\index{dump\_restart@{dump\_restart}!restart.c@{restart.c}}
\doxysubsubsection{\texorpdfstring{dump\_restart()}{dump\_restart()}}
{\footnotesize\ttfamily void dump\+\_\+restart (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_mesh_s}{MeshS}} $\ast$}]{pM,  }\item[{\mbox{\hyperlink{struct_output_s}{OutputS}} $\ast$}]{pout }\end{DoxyParamCaption})}



Writes a restart file, including problem-\/specific data from a user defined function ~\newline
 



Definition at line 439 of file restart.\+c.

\mbox{\Hypertarget{restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b}\label{restart_8c_ad964b97cdef7ace0e38dea077f7dbc0b}} 
\index{restart.c@{restart.c}!restart\_grids@{restart\_grids}}
\index{restart\_grids@{restart\_grids}!restart.c@{restart.c}}
\doxysubsubsection{\texorpdfstring{restart\_grids()}{restart\_grids()}}
{\footnotesize\ttfamily void restart\+\_\+grids (\begin{DoxyParamCaption}\item[{char $\ast$}]{res\+\_\+file,  }\item[{\mbox{\hyperlink{struct_mesh_s}{MeshS}} $\ast$}]{pM }\end{DoxyParamCaption})}



Reads nstep, time, dt, and arrays of \mbox{\hyperlink{struct_cons_s}{ConsS}} and interface B for each of the Grid structures in the restart file. ~\newline
 

By the time this function is called (in Step 6 of \mbox{\hyperlink{main_8c_a0ddf1224851353fc92bfbff6f499fa97}{main()}}), the Mesh hierarchy has already been re-\/initialized by \mbox{\hyperlink{init__mesh_8c_a916f9c7c3347abd0ff4e1acc00cd0f27}{init\+\_\+mesh()}} and \mbox{\hyperlink{init__grid_8c_a95667109c997592ac508a6f67e34b827}{init\+\_\+grid()}} in Step 4 of \mbox{\hyperlink{main_8c_a0ddf1224851353fc92bfbff6f499fa97}{main()}} using parameters in the athinput file at the start of this restart file, the command line, or from a new input file. 

Definition at line 56 of file restart.\+c.

