<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hermes-docs: src/dump_history.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hermes-docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dump__history_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dump_history.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to write dumps of scalar "history" variables in a formatted table.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="copyright_8h_source.html">copyright.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="defs_8h_source.html">defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="athena_8h_source.html">athena.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prototypes_8h_source.html">prototypes.h</a>&quot;</code><br />
</div>
<p><a href="dump__history_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a97440e5d1a0e859e11abc6552b758d8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a97440e5d1a0e859e11abc6552b758d8c">NSCAL</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:a97440e5d1a0e859e11abc6552b758d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458b9b0820c5dc45a89076bfaa052440"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a458b9b0820c5dc45a89076bfaa052440">MAX_USR_H_COUNT</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:a458b9b0820c5dc45a89076bfaa052440"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a04359dca00afaaa4174cea334622a472"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#a04359dca00afaaa4174cea334622a472">dump_history</a> (<a class="el" href="struct_mesh_s.html">MeshS</a> *pM, <a class="el" href="struct_output_s.html">OutputS</a> *pOut)</td></tr>
<tr class="memdesc:a04359dca00afaaa4174cea334622a472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to write dumps of scalar "history" variables in a formatted table.  <a href="dump__history_8c.html#a04359dca00afaaa4174cea334622a472">More...</a><br /></td></tr>
<tr class="separator:a04359dca00afaaa4174cea334622a472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af708912b4ea7f10be9fea2861ea0374c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c">dump_history_enroll</a> (const <a class="el" href="athena_8h.html#aaa64b3ee5eefc566b7c09368c414de89">ConsFun_t</a> pfun, const char *label)</td></tr>
<tr class="memdesc:af708912b4ea7f10be9fea2861ea0374c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds new user-defined history variables <br  />
  <a href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c">More...</a><br /></td></tr>
<tr class="separator:af708912b4ea7f10be9fea2861ea0374c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to write dumps of scalar "history" variables in a formatted table. </p>
<p>PURPOSE: Functions to write dumps of scalar "history" variables in a formatted table. "History" variables are mostly VOLUME AVERAGES, e.g.</p><ul>
<li>S = \Sum_{ijk} q[k][j][i]*dx1[i]*dx2[j]*dx3[k] / \Sum_{ijk} dx1[i]*dx2[j]*dx3[k],</li>
</ul>
<p>although other quantities like time and dt are also output. To compute TOTAL, VOLUME INTEGRATED quantities, just multiply by the Domain volume, which is output in the first line of the history file. History data is written periodically, giving the time-evolution of that quantitity. Default (hardwired) values are:</p><ul>
<li>scal[0] = time</li>
<li>scal[1] = dt</li>
<li>scal[2] = mass</li>
<li>scal[3] = total energy</li>
<li>scal[4] = d*v1</li>
<li>scal[5] = d*v2</li>
<li>scal[6] = d*v3</li>
<li>scal[7] = 0.5*d*v1**2</li>
<li>scal[8] = 0.5*d*v2**2</li>
<li>scal[9] = 0.5*d*v3**2</li>
<li>scal[10] = 0.5*b1**2</li>
<li>scal[11] = 0.5*b2**2</li>
<li>scal[12] = 0.5*b3**2</li>
<li>scal[13] = d*Phi</li>
<li>scal[14+NSCALARS] = passively advected scalars</li>
<li>scal[15+NSCALARS] = angular momentum</li>
</ul>
<p>More variables can be hardwired by increasing NSCAL=number of variables, and adding calculation of desired quantities below.</p>
<p>Alternatively, up to MAX_USR_H_COUNT new history variables can be added using <a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c" title="Adds new user-defined history variables">dump_history_enroll()</a> in the problem generator.</p>
<p>With SMR, data is averaged over each Domain separately, and dumped to separate files with the level and domain number encoded in the filename. Dumps are always made for all levels and domains, and are written in lev# directories of the root (rank=0) process FOR THAT DOMAIN COMMUNICATOR.</p>
<p>With SR, the default (hardwired) variables are:</p><ul>
<li>scal[0] = time</li>
<li>scal[1] = dt</li>
<li>scal[2] = mass</li>
<li>scal[3] = total energy</li>
<li>scal[4] = x1-mom</li>
<li>scal[5] = x2-mom</li>
<li>scal[6] = x3-mom</li>
<li>scal[7] = (U^t)**2</li>
<li>scal[8] = (U^x)**2</li>
<li>scal[9] = (U^y)**2</li>
<li>scal[10] = (U^z)**2</li>
<li>scal[11] = (b^t)**2</li>
<li>scal[12] = (b^x)**2</li>
<li>scal[13] = (b^y)**2</li>
<li>scal[14] = (b^z)**2</li>
<li>scal[15] = |b|**2</li>
<li>scal[16] = T^00_EM</li>
</ul>
<p>CONTAINS PUBLIC FUNCTIONS:</p><ul>
<li><a class="el" href="dump__history_8c.html#a04359dca00afaaa4174cea334622a472" title="Function to write dumps of scalar &quot;history&quot; variables in a formatted table.">dump_history()</a> - Writes variables as formatted table</li>
<li><a class="el" href="dump__history_8c.html#af708912b4ea7f10be9fea2861ea0374c" title="Adds new user-defined history variables">dump_history_enroll()</a> - Adds new user-defined history variables <br  />
 </li>
</ul>

<p class="definition">Definition in file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a458b9b0820c5dc45a89076bfaa052440"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458b9b0820c5dc45a89076bfaa052440">&#9670;&nbsp;</a></span>MAX_USR_H_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_USR_H_COUNT&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dump__history_8c_source.html#l00080">80</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
<a id="a97440e5d1a0e859e11abc6552b758d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97440e5d1a0e859e11abc6552b758d8c">&#9670;&nbsp;</a></span>NSCAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NSCAL&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dump__history_8c_source.html#l00077">77</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a04359dca00afaaa4174cea334622a472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04359dca00afaaa4174cea334622a472">&#9670;&nbsp;</a></span>dump_history()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_mesh_s.html">MeshS</a> *&#160;</td>
          <td class="paramname"><em>pM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_output_s.html">OutputS</a> *&#160;</td>
          <td class="paramname"><em>pOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to write dumps of scalar "history" variables in a formatted table. </p>

<p class="definition">Definition at line <a class="el" href="dump__history_8c_source.html#l00095">95</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
<a id="af708912b4ea7f10be9fea2861ea0374c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af708912b4ea7f10be9fea2861ea0374c">&#9670;&nbsp;</a></span>dump_history_enroll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_history_enroll </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="athena_8h.html#aaa64b3ee5eefc566b7c09368c414de89">ConsFun_t</a>&#160;</td>
          <td class="paramname"><em>pfun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds new user-defined history variables <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="dump__history_8c_source.html#l00477">477</a> of file <a class="el" href="dump__history_8c_source.html">dump_history.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dump__history_8c.html">dump_history.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
